import{f as x,b as w,r as o,j as e}from"./index-3a55f404.js";import{A as g}from"./index-af17fb20.js";import{a as d}from"./Main-755d3160.js";import{L as b,S as k}from"./Mission-ac96cf18.js";import{F as v}from"./FadeLoader-67dce3f5.js";import{b as y,d as E,e as L,h as m}from"./api-d470eb0d.js";/* empty css              */import"./MainLayout-42d91e61.js";import"./iconBase-10535e60.js";import"./index-e59a6ce4.js";import"./index-81d1c8e2.js";function q(){var l;const{id:c}=x(),h=w(),[n,u]=o.useState(),[a,p]=o.useState();async function f(){var r;try{const s=await d.get(`lists/${c}/`);if(s.status===200){const i=await s.data;if(document.title=i.title,(r=i.missions)==null||r.forEach(async t=>{t.project?(t.related=await y(t.project),t.related&&(t.related.route="/sessions-manager/projects/")):t.course&&(t.related=await E(t.course),t.related&&(t.related.route="/learning-tracker/courses/"))}),i.reward){const t=await L(i.reward);p(t)}u(i)}}catch(s){return s instanceof g&&s.status===404&&h("/central/not-found"),m(s)}}async function j(){try{(await d.delete(`lists/${c}/`)).status===204&&window.history.back()}catch(r){return m(r)}}return o.useEffect(()=>{f()},[]),e.jsx("div",{className:"page list-page",children:n?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"list-title",children:n.title}),e.jsx("br",{}),e.jsx("div",{className:"missions-container list",children:(l=n.missions)==null?void 0:l.map(r=>e.jsx(b,{mission:r,readonly:!0}))}),a&&e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsx("h2",{children:"Reward"}),e.jsx("div",{className:`reward-container ${a.locked&&"locked"}`,children:e.jsxs("a",{onClick:r=>{a.locked&&r.preventDefault()},href:`/entertainment/${a.id}/`,children:[e.jsx("div",{className:"reward-img",children:e.jsx("img",{src:a.image,alt:""})}),e.jsx("h3",{children:a.title})]})})]}),e.jsx("button",{onClick:j,className:"submit-btn",children:"Delete"})]}):e.jsx(v,{color:"#c0c0c0",height:18,width:6})})}export{q as default};
