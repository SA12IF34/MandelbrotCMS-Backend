import{r as c,b as g,j as e}from"./index-3a55f404.js";import{a as h}from"./api-5ce17b8f.js";import{F as k}from"./FadeLoader-67dce3f5.js";import{h as f}from"./api-d470eb0d.js";function b(){var d;document.title="Add New Course";const[n,p]=c.useState(),[v,u]=c.useState(!1),s=c.useRef(null),o=c.useRef(null),x=g();async function j(){var r,a;if(((r=s.current)==null?void 0:r.value.length)===0){alert("Please enter course link");return}try{u(!0);const t=await h.post("get-course-data/",{link:(a=s.current)==null?void 0:a.value});if(t.status===200){const i=await t.data;p(i),u(!1)}}catch(t){f(t)}}async function m(){var r,a,t,i;if(((r=s.current)==null?void 0:r.value.length)===0){alert("Please enter course link");return}else if(((a=o.current)==null?void 0:a.value)===""){alert("Please specify course status");return}try{const l=await h.post("courses/",{link:(t=s.current)==null?void 0:t.value,status:(i=o.current)==null?void 0:i.value});if(l.status===201){const w=await l.data;x(`/learning-tracker/courses/${w.id}/`)}}catch(l){f(l)}}return e.jsx("div",{className:"page add-new-page",children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"field-container",children:[e.jsx("input",{ref:s,type:"text",placeholder:"Enter a coursera or youtube link"}),e.jsxs("select",{ref:o,defaultValue:"",name:"",id:"",children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"current",children:"current"}),e.jsx("option",{value:"done",children:"done"}),e.jsx("option",{value:"later",children:"lateer"})]})]}),n&&e.jsxs("div",{className:"preview-course",children:[e.jsx("img",{src:n.image,alt:""}),e.jsx("h3",{children:n.title}),e.jsx("div",{children:(d=n.sections)==null?void 0:d.map(r=>e.jsx("div",{children:e.jsx("h4",{children:r.title})}))})]}),v&&e.jsx(k,{color:"#c0c0c0"}),e.jsxs("div",{className:"btns",children:[e.jsx("button",{onClick:j,children:"Preview"}),e.jsx("button",{onClick:m,children:"Add"})]})]})})}export{b as default};
