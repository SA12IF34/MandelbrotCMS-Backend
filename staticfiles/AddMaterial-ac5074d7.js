import{b as S,r as t,j as e}from"./index-3a55f404.js";import{a as k}from"./api-6c4aed90.js";import{h as b}from"./api-d470eb0d.js";function I(){document.title="Add Material";const h=S(),p=t.useRef(null),m=t.useRef(null),f=t.useRef(null),x=t.useRef(null),j=t.useRef(null),v=t.useRef(null),g=t.useRef(null),q=t.useRef(null),y=t.useRef(null),[d,M]=t.useState(),[c,A]=t.useState();async function w(){var l,a,r,i;try{if(!((l=p.current)!=null&&l.value)){alert("Link is required");return}if(!((a=m.current)!=null&&a.value)){alert("Status is required");return}const n=await k.post("add/by-link/",{link:(r=p.current)==null?void 0:r.value,status:(i=m.current)==null?void 0:i.value});if(n.status===201){const s=await n.data;h(`/entertainment/materials/${s.id}/`)}}catch(n){b(n)}}async function L(){var l,a,r,i,n,s;try{const u={title:(l=v.current)==null?void 0:l.value,description:(a=y.current)==null?void 0:a.value,status:(r=f.current)==null?void 0:r.value,link:(i=g.current)==null?void 0:i.value,image:c||null,image_upload:d||null,type:(n=x.current)==null?void 0:n.value,sub_type:(s=j.current)==null?void 0:s.value},o=await k.post("add/manual/",u);if(o.status===201){const N=await o.data;h(`/entertainment/materials/${N.id}/`)}}catch(u){b(u)}}function R(l){var r;const a=l.target;if(a.type==="file"){const i=(r=a.files)==null?void 0:r[0];if(i){const n=new FileReader;n.onload=s=>{var o;const u=(o=s.target)==null?void 0:o.result;typeof u=="string"&&M(u)},n.readAsDataURL(i)}}else a.type==="text"&&A(a.value)}return e.jsxs("div",{className:"page add-material-page",children:[e.jsxs("div",{className:"by-link",children:[e.jsx("h2",{children:"Add Material by Link"}),e.jsxs("div",{className:"field-container",children:[e.jsx("input",{ref:p,type:"text",placeholder:"Enter MAL, anilist, steam, or rotten tomatoes link"}),e.jsxs("select",{ref:m,defaultValue:"",children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"current",children:"Current"}),e.jsx("option",{value:"done",children:"Done"}),e.jsx("option",{value:"future",children:"Future"})]})]}),e.jsx("button",{onClick:w,children:"Add Material"})]}),e.jsxs("div",{className:"manual",children:[e.jsx("h2",{children:"Add Material Manually"}),e.jsxs("form",{onSubmit:l=>{l.preventDefault(),L()},children:[e.jsxs("select",{ref:x,title:"required",required:!0,defaultValue:"",children:[e.jsx("option",{value:"",children:"Type"}),e.jsx("option",{value:"anime&manga",children:"Anime & Manga"}),e.jsx("option",{value:"shows&movies",children:"Shows & Movies"}),e.jsx("option",{value:"game",children:"Games"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsxs("select",{ref:j,title:"not required",defaultValue:"",children:[e.jsx("option",{value:"",children:"Sub-type"}),e.jsx("option",{value:"anime",children:"Anime"}),e.jsx("option",{value:"manga",children:"Manga"}),e.jsx("option",{value:"show",children:"Show"}),e.jsx("option",{value:"movie",children:"Movie"}),e.jsx("option",{value:"game",children:"game"})]}),e.jsxs("select",{ref:f,required:!0,title:"required",defaultValue:"",children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"current",children:"Current"}),e.jsx("option",{value:"done",children:"Done"}),e.jsx("option",{value:"future",children:"Future"})]}),e.jsx("input",{ref:v,required:!0,title:"required",className:"title",type:"text",placeholder:"Title"}),e.jsx("input",{ref:g,required:!0,title:"required",className:"link",type:"text",placeholder:"Link to the Work"}),e.jsx("input",{ref:q,onChange:R,className:"image-link",type:"text",placeholder:"Image Link"}),e.jsxs("label",{htmlFor:"image-upload",children:[e.jsx("span",{className:"image-upload-label",children:"Or Upload Image"}),e.jsx("input",{onChange:R,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",id:"image-upload"})]}),(d||c)&&e.jsx("img",{src:d||c,alt:""}),e.jsx("textarea",{ref:y,required:!0,title:"required",placeholder:"Description"}),e.jsx("button",{type:"submit",children:"Add Material"})]})]})]})}export{I as default};
