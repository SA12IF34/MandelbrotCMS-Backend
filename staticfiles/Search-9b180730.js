import{r as a,j as e,L as G}from"./index-3a55f404.js";import{T as I}from"./Main-93152efa.js";import{a as P}from"./api-6c4aed90.js";import{F as _}from"./FadeLoader-67dce3f5.js";import{h as q}from"./api-d470eb0d.js";/* empty css              */import"./MainLayout-42d91e61.js";import"./iconBase-10535e60.js";import"./index-81d1c8e2.js";function W(){var g;document.title="Search";const{theme:N}=a.useContext(I),p=a.useRef(null),m=a.useRef(null),x=a.useRef(null),j=a.useRef(null),u=a.useRef(null),v=a.useRef(null),f=a.useRef(null),[d,A]=a.useState(),[U,F]=a.useState(!1),M=["action","adventure","ai","arts","cars","comedy","dementia","demons","drama","ecchi","fantasy","sci-fi","game","harem","hentai","historical","horror","josei","kids","magic","martial","mecha","military","music","mystery","parody","police","power","psychological","romance","samurai","school","seinen","shoujo","shounen","space","sports","super","supernatural","thriller","vampire","yaoi","yuri","cgdct","iyashikei","moe","slice of life"];async function y(s){try{const t=await P.get(`search/?${s}`);if(t.status===200){const i=await t.data;A(i)}}catch(t){q(t)}}a.useEffect(()=>{const s=new URLSearchParams(window.location.search),t=Array.from(s.keys()),i=Array.from(s.values());let l="";for(let n=0;n<t.length;n++){n===t.length-1?t[n]==="type"?l+=`${t[n]}=${encodeURIComponent(i[n])||""}`:l+=`${t[n]}=${i[n]||""}`:t[n]==="type"?l+=`${t[n]}=${encodeURIComponent(i[n])||""}&`:l+=`${t[n]}=${i[n]||""}&`;const c=document.getElementById(t[n]);c&&(c.type==="checkbox"?c.checked=i[n]==="true":c.value=decodeURIComponent(i[n]))}y(l)},[]);const r=()=>{var R,w,C,S,$,k,b;const s=(R=p.current)==null?void 0:R.value,t=(w=m.current)==null?void 0:w.value,i=(C=x.current)==null?void 0:C.value,l=(S=j.current)==null?void 0:S.value,n=($=u.current)==null?void 0:$.checked,c=(k=v.current)==null?void 0:k.value,E=(b=f.current)==null?void 0:b.value;let h=document.querySelectorAll(".genres input:checked");h=Array.from(h).map(T=>T.id),h=h.length>0?h.join(","):"";const o=new URLSearchParams(window.location.search);o.set("title",s||""),o.set("type",t||""),o.set("subtype",i||""),o.set("status",l||""),o.set("special",n?"true":"false"),o.set("rate",c||""),o.set("user_rate",E||""),o.set("genres",h);const L=`${window.location.pathname}?${o.toString()}`;window.history.replaceState({},"",L),y(o.toString())};return e.jsxs("div",{className:"search-page page",children:[e.jsxs("div",{className:"fields-container",children:[e.jsx("input",{id:"title",onChange:r,ref:p,type:"text",placeholder:"Material Name"}),e.jsxs("select",{id:"type",onChange:r,ref:m,children:[e.jsx("option",{selected:!0,value:"",children:"Type"}),e.jsx("option",{value:"anime&manga",children:"Anime & Manga"}),e.jsx("option",{value:"shows&movies",children:"Shows & Movies"}),e.jsx("option",{value:"game",children:"Games"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsxs("select",{id:"subtype",onChange:r,ref:x,children:[e.jsx("option",{selected:!0,value:"",children:"Sub-type"}),e.jsx("option",{value:"anime",children:"Anime"}),e.jsx("option",{value:"manga",children:"Manga"}),e.jsx("option",{value:"show",children:"Shows"}),e.jsx("option",{value:"movie",children:"Movies"}),e.jsx("option",{value:"game",children:"Games"})]}),e.jsxs("select",{id:"status",onChange:r,ref:j,children:[e.jsx("option",{selected:!0,value:"",children:"Status"}),e.jsx("option",{value:"current",children:"Current"}),e.jsx("option",{value:"done",children:"Done"}),e.jsx("option",{value:"future",children:"Future"})]}),e.jsxs("label",{htmlFor:"special",className:`specialty ${(g=u.current)!=null&&g.checked?"checked":""}`,children:[e.jsx("span",{children:"Special"}),e.jsx("input",{onChange:r,ref:u,type:"checkbox",id:"special"})]}),e.jsxs("select",{id:"rate",onChange:r,ref:v,children:[e.jsx("option",{selected:!0,value:"",children:"Avg rate"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"7",children:"7"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"10",children:"10"})]}),e.jsxs("select",{id:"user_rate",onChange:r,ref:f,children:[e.jsx("option",{selected:!0,value:"",children:"My rate"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"7",children:"7"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"10",children:"10"})]}),e.jsxs("div",{className:"genres",children:[e.jsx("span",{onClick:()=>{F(s=>!s)},children:"genres"}),e.jsx("div",{className:`genres-container ${U?"show":""}`,children:M.map(s=>e.jsxs("label",{htmlFor:s,className:"genre",children:[e.jsx("input",{onChange:r,type:"checkbox",id:s}),e.jsx("span",{children:s==="cgdct"?s.toUpperCase():s.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")})]},s))})]})]}),e.jsx("div",{className:"results-container",children:d?d.length>0?d.map(s=>e.jsx(G,{title:s.title,to:`/entertainment/materials/${s.id}`,children:e.jsxs("div",{children:[e.jsx("div",{className:"img-container",children:e.jsx("img",{src:s.image,alt:""})}),e.jsx("div",{className:"title",children:e.jsx("span",{children:s.title.length>35?s.title.slice(0,36)+"...":s.title})})]})},s.id)):e.jsx("h2",{children:"No materials.."}):e.jsx(_,{color:N==="light"?" #350d0b":"#f5f5f5",height:18,width:6})})]})}export{W as default};
