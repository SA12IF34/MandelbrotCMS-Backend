import{r as l,j as t,R as h,A as N,u as S,b as k,L as p,c as E,d as x,_ as f}from"./index-3a55f404.js";/* empty css              */import{M as L}from"./MainLayout-42d91e61.js";import{I as A,a as R}from"./index-e59a6ce4.js";import{a as g,c as P,h as j}from"./api-d470eb0d.js";import{A as I}from"./index-af17fb20.js";import{M as v}from"./index-81d1c8e2.js";import{F}from"./FadeLoader-67dce3f5.js";const _=l.createContext({}),O=({children:e})=>{const[a,c]=l.useState(!1),[o,s]=l.useState(),i=_.Provider;return t.jsx(i,{value:{showPopup:a,setShowPopup:c,popup:o,setPopup:s},children:e})};function T({children:e}){const{setShowPopup:a}=h.useContext(_);return t.jsxs("div",{className:"content-popup",children:[t.jsx("button",{onClick:()=>{a(!1),window.location.hash=""},children:t.jsx(A,{})}),e]})}function C({label:e,setting:a,value:c,handleChange:o}){return t.jsxs("label",{htmlFor:a,className:"toggle-setting",children:[t.jsx("input",{type:"checkbox",id:a,checked:c,onChange:async s=>{const i=s.target.checked;await o({[a]:i})||(s.target.checked=!i)}}),t.jsx("span",{className:"setting-slider"}),t.jsx("span",{children:e})]})}g.defaults.xsrfCookieName="csrftoken";g.defaults.xsrfHeaderName="X-CSRFToken";g.defaults.withCredentials=!0;g.defaults.withXSRFToken=!0;const st=g.create({baseURL:"https://api.cms.saifchan.online/missions/apis/"}),y=P("https://api.cms.saifchan.online/authentication/");function D(){const{settings:e,setSettings:a}=l.useContext(N);async function c(){try{if(localStorage.getItem("settings"))a(JSON.parse(localStorage.getItem("settings")));else{const s=await y.get("apis/settings/");if(s.status===200){const i=await s.data;localStorage.setItem("settings",JSON.stringify(i)),console.log(i),a(i)}}}catch(s){s instanceof I?j(s):(alert("Something went wrong while fetching settings. Please try again later."),console.error(s))}}async function o(s){try{const i=await y.patch("apis/settings/",s);if(i.status===202){const d=await i.data;return localStorage.setItem("settings",JSON.stringify(d)),a(d),console.log("data",d),!0}return!1}catch(i){return j(i),!1}}return l.useEffect(()=>{c()},[]),t.jsx("div",{className:"settings-container",children:t.jsxs("section",{className:"settings-options",children:[t.jsx("h3",{children:"Options"}),t.jsx("br",{}),t.jsx("div",{children:e&&t.jsxs(t.Fragment,{children:[t.jsx(C,{label:"Redirect to Central on Opening",setting:"redirect_home",value:e.redirect_home,handleChange:o}),t.jsx(C,{label:"Navigate to Parts from Intro Page",setting:"intro_parts_nav",value:e.intro_parts_nav,handleChange:o})]})})]})})}const w=P("https://api.cms.saifchan.online/authentication/apis/");function M(){const[e,a]=l.useState(),[c,o]=l.useState(!1),s=l.useRef(null);async function i(){try{const n=await w.get("my-account/");if(n.status===200){const r=await n.data;a(r)}}catch(n){return j(n)}}async function d(){try{(await w.post("logout/")).status===200&&window.location.reload()}catch(n){return j(n)}}async function m(){try{(await w.post("close/")).status===204&&window.location.reload()}catch(n){return j(n)}}async function u(n){try{const r=await w.patch("my-account/",n,{headers:{"Content-Type":"multipart/form-data"}});if(r.status===202){const b=await r.data;a(b)}}catch(r){return j(r)}}return l.useEffect(()=>{i()},[]),t.jsx("div",{className:"profile-container",children:e?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"profile-pic",children:[t.jsx("div",{children:t.jsx("img",{src:"https://api.cms.saifchan.online/"+e.picture,alt:""})}),t.jsxs("div",{className:"edit-pic",children:[t.jsx("label",{title:"edit picture",htmlFor:"edit-pic-field",children:t.jsx(v,{})}),t.jsx("input",{onChange:n=>{const r=n.target;r.files&&r.files[0]&&u({picture:r.files[0]})},type:"file",id:"edit-pic-field"})]})]}),t.jsxs("div",{className:"profile-about",children:[t.jsx("h4",{children:"About"}),c?t.jsxs("div",{className:"textarea",children:[t.jsx("textarea",{ref:s,autoFocus:!0,children:e.about}),t.jsx("button",{onClick:()=>{var n,r;((n=s.current)==null?void 0:n.value)!==e.about&&u({about:(r=s.current)==null?void 0:r.value}),o(!1)},title:"finish edit",children:t.jsx(R,{})})]}):t.jsx("p",{children:e.about}),t.jsx("button",{onClick:()=>{o(!0)},title:"edit about",className:"edit-about",children:t.jsx(v,{})})]}),t.jsxs("div",{className:"profile-info",children:[t.jsxs("h4",{children:["Username: ",e.username]}),t.jsxs("h4",{children:["Email: ",e.email]})]}),t.jsxs("div",{className:"profile-action",children:[t.jsx("button",{title:"logout",onClick:d,children:"Logout"}),t.jsx("button",{title:"delete account",onClick:m,children:"Delete Account"})]})]}):t.jsx(F,{color:"#c0c0c0"})})}function z({children:e}){const a=S(),c=k(),{setShowPopup:o,setPopup:s,showPopup:i,popup:d}=l.useContext(_);l.useEffect(()=>{const u=n=>{window.matchMedia("(max-width: 768px)").matches?c("/central/"+window.location.hash.slice(1)):(o(!0),s(n))};switch(window.location.hash){case"#profile":u("profile");break;case"#settings":u("settings");break}},[]);function m(u){if(!window.matchMedia("(max-width: 768px)").matches)switch(u.preventDefault(),u.target.id){case"profile":window.location.hash="profile",s("profile"),o(!0);break;case"settings":window.location.hash="settings",s("settings"),o(!0);break}}return t.jsxs(t.Fragment,{children:[t.jsxs("header",{children:[t.jsxs("div",{className:"nav-1",children:[t.jsx(p,{id:"profile",onClick:m,to:"/central/profile",children:t.jsx("span",{id:"profile",children:"Profile"})}),t.jsx(p,{id:"settings",onClick:m,to:"/central/settings",children:t.jsx("span",{id:"settings",children:"Settings"})}),t.jsx(p,{id:"stats",onClick:m,to:"/central/stats",children:t.jsx("span",{id:"stats",children:"Stats"})}),t.jsx(p,{id:"current-goal",onClick:m,to:"/central/current-goal",children:t.jsx("span",{children:"Current Goal"})})]}),t.jsxs("nav",{className:"nav-2",children:[t.jsx(p,{className:a.pathname==="/central/"||a.pathname==="/central"?"current-page":"",to:"/central/",children:t.jsx("span",{children:"Home"})}),t.jsx(p,{className:a.pathname.includes("/create-new-list")?"current-page":"",to:"/central/create-new-list",children:t.jsx("span",{children:"Create New List"})}),t.jsx(p,{className:a.pathname.includes("/all-lists")?"current-page":"",to:"/central/all-lists",children:t.jsx("span",{children:"All Lists"})})]})]}),e,i&&t.jsxs(T,{children:[d==="profile"&&t.jsx(M,{}),d==="settings"&&t.jsx(D,{})]})]})}const V=h.lazy(()=>f(()=>import("./Home-cc80e7bf.js"),["assets/Home-cc80e7bf.js","assets/index-3a55f404.js","assets/Mission-ac96cf18.js","assets/index-e59a6ce4.js","assets/iconBase-10535e60.js","assets/index-af17fb20.js","assets/api-d470eb0d.js","assets/index-ee7d2108.js","assets/FadeLoader-67dce3f5.js","assets/MainLayout-42d91e61.js","assets/index-81d1c8e2.js","assets/index-86385807.css"])),U=h.lazy(()=>f(()=>import("./CreateNewList-62ccefd1.js"),["assets/CreateNewList-62ccefd1.js","assets/index-3a55f404.js","assets/index-2274eb4d.js","assets/iconBase-10535e60.js","assets/Mission-ac96cf18.js","assets/index-e59a6ce4.js","assets/index-af17fb20.js","assets/api-d470eb0d.js","assets/MainLayout-42d91e61.js","assets/index-81d1c8e2.js","assets/FadeLoader-67dce3f5.js","assets/index-86385807.css"])),G=h.lazy(()=>f(()=>import("./AllLists-54c3e7fa.js"),["assets/AllLists-54c3e7fa.js","assets/index-3a55f404.js","assets/index-e59a6ce4.js","assets/iconBase-10535e60.js","assets/FadeLoader-67dce3f5.js","assets/api-d470eb0d.js","assets/MainLayout-42d91e61.js","assets/index-af17fb20.js","assets/index-81d1c8e2.js","assets/index-86385807.css"])),H=h.lazy(()=>f(()=>import("./List-dbb70cd2.js"),["assets/List-dbb70cd2.js","assets/index-3a55f404.js","assets/index-af17fb20.js","assets/api-d470eb0d.js","assets/Mission-ac96cf18.js","assets/index-e59a6ce4.js","assets/iconBase-10535e60.js","assets/FadeLoader-67dce3f5.js","assets/MainLayout-42d91e61.js","assets/index-81d1c8e2.js","assets/index-86385807.css"])),J=h.lazy(()=>f(()=>import("./Profile-69727539.js"),["assets/Profile-69727539.js","assets/index-3a55f404.js","assets/MainLayout-42d91e61.js","assets/iconBase-10535e60.js","assets/index-e59a6ce4.js","assets/api-d470eb0d.js","assets/index-af17fb20.js","assets/index-81d1c8e2.js","assets/FadeLoader-67dce3f5.js","assets/index-86385807.css"])),X=h.lazy(()=>f(()=>import("./Settings-a874d547.js"),["assets/Settings-a874d547.js","assets/index-3a55f404.js","assets/MainLayout-42d91e61.js","assets/iconBase-10535e60.js","assets/index-e59a6ce4.js","assets/api-d470eb0d.js","assets/index-af17fb20.js","assets/index-81d1c8e2.js","assets/FadeLoader-67dce3f5.js","assets/index-86385807.css"])),$=h.lazy(()=>f(()=>import("./NotFound-41343c6f.js"),["assets/NotFound-41343c6f.js","assets/index-3a55f404.js"]));function q(){const e={layout:"central-layout",nav:"central-nav",c1:"#F5F5F5",c2:"#C0C0C0",c3:"#434343"};return t.jsx(O,{children:t.jsx(L,{style:e,children:t.jsx(z,{children:t.jsxs(E,{children:[t.jsx(x,{path:"/",element:t.jsx(V,{title:"The Central"})}),t.jsx(x,{path:"/create-new-list",element:t.jsx(U,{title:"New List"})}),t.jsx(x,{path:"/all-lists",element:t.jsx(G,{title:"All Lists"})}),t.jsx(x,{path:"/lists/:id",element:t.jsx(H,{})}),t.jsx(x,{path:"/profile",element:t.jsx(J,{title:"Profile"})}),t.jsx(x,{path:"/settings",element:t.jsx(X,{title:"Settings"})}),t.jsx(x,{path:"/*",element:t.jsx($,{})})]})})})})}const at=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{at as M,M as P,D as S,st as a};
